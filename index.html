<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Pro | Tax Transparency</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #4F46E5; --secondary: #10B981; --bg: #F3F4F6; --card: #FFFFFF; --text: #1F2937; --border: #E5E7EB; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--text); display: flex; justify-content: center; padding: 20px; }
        .container { width: 100%; max-width: 600px; background: var(--card); border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); overflow: hidden; border: 1px solid var(--border); }
        .tabs { display: flex; background: #F9FAFB; border-bottom: 1px solid var(--border); }
        .tab-btn { flex: 1; padding: 1rem; border: none; background: none; cursor: pointer; font-weight: 600; color: #6B7280; }
        .tab-btn.active { color: var(--primary); border-bottom: 3px solid var(--primary); background: white; }
        .content { padding: 1.5rem; display: none; }
        .content.active { display: block; }
        .check-card { background: #F9FAFB; padding: 1.2rem; border-radius: 12px; border: 1px solid var(--border); margin-bottom: 1rem; }
        h3 { font-size: 0.85rem; margin: 0 0 1rem 0; color: var(--primary); text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; }
        .input-group { margin-bottom: 0.8rem; }
        label { display: block; font-size: 0.75rem; font-weight: 600; margin-bottom: 0.3rem; color: #4B5563; }
        input { width: 100%; padding: 0.6rem; border: 1px solid var(--border); border-radius: 6px; font-size: 0.9rem; box-sizing: border-box; }
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; }
        .btn { width: 100%; padding: 0.8rem; border-radius: 8px; font-weight: 600; cursor: pointer; border: none; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: white; margin-top: 0.5rem; }
        .btn-outline { background: transparent; border: 2px dashed var(--border); color: #6B7280; margin-top: 0.5rem; }
        .btn-remove { background: #FEE2E2; color: #DC2626; padding: 0.2rem 0.5rem; font-size: 0.7rem; border-radius: 4px; cursor: pointer; }
        
        /* Tax Breakdown Styling */
        .tax-breakdown { font-size: 0.75rem; color: #6B7280; margin-top: 10px; padding-top: 10px; border-top: 1px solid #E5E7EB; }
        .tax-row { display: flex; justify-content: space-between; margin-bottom: 2px; }
        .tax-total { font-weight: 700; color: var(--text); margin-top: 4px; font-size: 0.8rem; }

        .summary-banner { text-align: center; padding: 1.2rem; background: #EEF2FF; border-radius: 12px; margin-bottom: 1.5rem; display: flex; justify-content: space-around; }
        .stat-val { font-size: 1.3rem; font-weight: 800; color: var(--primary); }
        .mode-toggle { display: flex; background: #E5E7EB; border-radius: 8px; padding: 4px; margin-bottom: 1rem; }
        .mode-btn { flex: 1; padding: 0.4rem; border: none; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; }
        .mode-btn.active { background: white; color: var(--primary); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <button class="tab-btn active" id="tabPay">Paychecks</button>
        <button class="tab-btn" id="tabBudget">Budget</button>
    </div>

    <div id="pay-calc" class="content active">
        <div id="check1" class="check-card">
            <h3>Check #1</h3>
            <div class="row">
                <div class="input-group"><label>Rate/Hr</label><input type="number" id="rate1" value="21"></div>
                <div class="input-group"><label>Reg Hours</label><input type="number" id="hrs1" value="80"></div>
            </div>
            <div class="row">
                <div class="input-group"><label>OT Hours</label><input type="number" id="ot1" value="0"></div>
                <div class="input-group"><label>Bonus</label><input type="number" id="bonus1" value="250"></div>
            </div>
            <div class="row">
                <div class="input-group"><label>401k %</label><input type="number" id="k1" value="6"></div>
                <div class="input-group"><label>Benefits $</label><input type="number" id="b1" value="35"></div>
            </div>
            <div class="tax-breakdown" id="breakdown1">
                </div>
        </div>

        <div id="check2" class="check-card" style="display:none;">
            <h3>Check #2 <button class="btn-remove" id="removeCheckBtn">Remove</button></h3>
            <div class="row">
                <div class="input-group"><label>Rate/Hr</label><input type="number" id="rate2" value="21"></div>
                <div class="input-group"><label>Reg Hours</label><input type="number" id="hrs2" value="80"></div>
            </div>
            <div class="row">
                <div class="input-group"><label>OT Hours</label><input type="number" id="ot2" value="0"></div>
                <div class="input-group"><label>Bonus</label><input type="number" id="bonus2" value="250"></div>
            </div>
            <div class="row">
                <div class="input-group"><label>401k %</label><input type="number" id="k2" value="6"></div>
                <div class="input-group"><label>Benefits $</label><input type="number" id="b2" value="35"></div>
            </div>
            <div class="tax-breakdown" id="breakdown2">
                </div>
        </div>

        <button id="addCheckBtn" class="btn btn-outline">+ Add Second Check</button>
        <button class="btn btn-primary" id="syncBtn">Sync & Display Taxes</button>
    </div>

    <div id="budget-calc" class="content">
        <div class="mode-toggle">
            <button id="biBtn" class="mode-btn active">Biweekly</button>
            <button id="moBtn" class="mode-btn">Monthly</button>
        </div>
        <div class="summary-banner">
            <div><div class="stat-label" id="incLabel">Income</div><div class="stat-val" id="totalIncDisp">$0.00</div></div>
            <div><div class="stat-label">Remaining</div><div class="stat-val" id="remainingDisp">$0.00</div></div>
        </div>
        <div class="input-group"><label id="billLabel">Bills</label><input type="number" id="bBills" value="550"></div>
        <div class="input-group"><label id="spendLabel">Spending</label><input type="number" id="bSpend" value="150"></div>
        <div class="row">
            <div class="input-group"><label>To Savings</label><input type="number" id="bSave" value="0"></div>
            <div class="input-group"><label>To Debt</label><input type="number" id="bInvest" value="0"></div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    let check2Active = false;
    let totalIncome = 0;

    const getTaxInfo = (p) => {
        const r = parseFloat(document.getElementById('rate'+p).value)||0, 
              h = parseFloat(document.getElementById('hrs'+p).value)||0,
              o = parseFloat(document.getElementById('ot'+p).value)||0,
              bn = parseFloat(document.getElementById('bonus'+p).value)||0,
              k = parseFloat(document.getElementById('k'+p).value)||0,
              b = parseFloat(document.getElementById('b'+p).value)||0;
        
        const gross = (r * h) + (o * r * 1.5) + bn;
        const kAmt = gross * (k/100);
        const preTaxTotal = kAmt + b;
        
        // Accurate NM/FICA Math
        const ss = gross * 0.062;
        const med = gross * 0.0145;
        const taxableAnnual = (gross - preTaxTotal) * 26;
        const stdDed = 16100;
        let taxable = Math.max(0, taxableAnnual - stdDed);
        
        // 2026 Fed Bracket Estimation
        let annFed = taxable > 50400 ? (taxable - 50400) * 0.22 + 5800 : (taxable - 12400) * 0.12 + 1240;
        let annState = taxable * 0.043; // NM Average
        
        const fed = annFed / 26;
        const state = annState / 26;
        const net = gross - preTaxTotal - ss - med - fed - state;

        return { gross, kAmt, b, ss, med, fed, state, net };
    };

    const updateDisplay = (p, data) => {
        const container = document.getElementById('breakdown'+p);
        container.innerHTML = `
            <div class="tax-row"><span>Gross Pay:</span><span>$${data.gross.toFixed(2)}</span></div>
            <div class="tax-row"><span>401k (${document.getElementById('k'+p).value}%):</span><span>-$${data.kAmt.toFixed(2)}</span></div>
            <div class="tax-row"><span>SS/Medicare:</span><span>-$${(data.ss + data.med).toFixed(2)}</span></div>
            <div class="tax-row"><span>Fed Tax (FITW):</span><span>-$${data.fed.toFixed(2)}</span></div>
            <div class="tax-row"><span>NM State Tax:</span><span>-$${data.state.toFixed(2)}</span></div>
            <div class="tax-row tax-total"><span>Net Take-Home:</span><span>$${data.net.toFixed(2)}</span></div>
        `;
    };

    const updateBudgetUI = () => {
        const bills = parseFloat(document.getElementById('bBills').value)||0,
              spend = parseFloat(document.getElementById('bSpend').value)||0,
              save = parseFloat(document.getElementById('bSave').value)||0,
              debt = parseFloat(document.getElementById('bInvest').value)||0;
        const rem = totalIncome - bills - spend - save - debt;
        const disp = document.getElementById('remainingDisp');
        disp.innerText = `$${rem.toFixed(2)}`;
        disp.style.color = rem < 0 ? "#DC2626" : "#4F46E5";
    };

    const setViewMode = (mode) => {
        const mult = mode === 'monthly' ? 1 : 0.5;
        document.getElementById('biBtn').classList.toggle('active', mode === 'biweekly');
        document.getElementById('moBtn').classList.toggle('active', mode === 'monthly');
        document.getElementById('billLabel').innerText = `Bills ($${1100 * mult})`;
        document.getElementById('spendLabel').innerText = `Spending ($${300 * mult})`;
        document.getElementById('bBills').value = 1100 * mult;
        document.getElementById('bSpend').value = 300 * mult;
        document.getElementById('incLabel').innerText = mode === 'monthly' ? "Monthly Income" : "Biweekly Income";
        updateBudgetUI();
    };

    // Listeners
    document.getElementById('tabPay').addEventListener('click', () => {
        document.getElementById('pay-calc').classList.add('active');
        document.getElementById('budget-calc').classList.remove('active');
        document.getElementById('tabPay').classList.add('active');
        document.getElementById('tabBudget').classList.remove('active');
    });

    document.getElementById('tabBudget').addEventListener('click', () => {
        document.getElementById('budget-calc').classList.add('active');
        document.getElementById('pay-calc').classList.remove('active');
        document.getElementById('tabBudget').classList.add('active');
        document.getElementById('tabPay').classList.remove('active');
    });

    document.getElementById('addCheckBtn').addEventListener('click', () => {
        check2Active = true;
        document.getElementById('check2').style.display = 'block';
        document.getElementById('addCheckBtn').style.display = 'none';
        setViewMode('monthly');
    });

    document.getElementById('removeCheckBtn').addEventListener('click', () => {
        check2Active = false;
        document.getElementById('check2').style.display = 'none';
        document.getElementById('addCheckBtn').style.display = 'block';
        setViewMode('biweekly');
    });

    document.getElementById('syncBtn').addEventListener('click', () => {
        const data1 = getTaxInfo('1');
        updateDisplay('1', data1);
        totalIncome = data1.net;
        
        if (check2Active) {
            const data2 = getTaxInfo('2');
            updateDisplay('2', data2);
            totalIncome += data2.net;
        }
        
        document.getElementById('totalIncDisp').innerText = `$${totalIncome.toFixed(2)}`;
        updateBudgetUI();
    });

    ['bBills', 'bSpend', 'bSave', 'bInvest'].forEach(id => {
        document.getElementById(id).addEventListener('input', updateBudgetUI);
    });

    document.getElementById('biBtn').addEventListener('click', () => setViewMode('biweekly'));
    document.getElementById('moBtn').addEventListener('click', () => setViewMode('monthly'));

    setViewMode('biweekly');
});
</script>
</body>
</html>